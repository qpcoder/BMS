<?xml version="1.0" encoding="utf-8"?>
<!--Log4net Logging Setup-->
<log4net debug="true">

    <!--Config Layout and Property for file log-->
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
        <preserveLogFileNameExtension value="true"/>
        <!--Gets and Sets the path to the file that logging will be writing to-->
        <file type="log4net.Util.PatternString" value="logs\QP.BMS.log" />
        <!--insert DATETIME into LOGNAME
      => datePattern automatically pre-inserts the last dot-->
        <datePattern value="dd.MM.yyyy" />
        <!--Gets or sets a flag that indicates 
      whether the file should be appended to or overwritten-->
        <staticLogFileName value="false"/>
        <appendToFile value="true" />
        <!--Gets or sets the rolling style 
      => Size:chi theo kich thuoc
      => Date: chi theo theo ngay
      => Composite: to hop bat ky-->
        <rollingStyle value="Composite"/>
        <!--Gets and Sets the maximum number of backup files 
      that are kept before the olds is erased-->
        <maxSizeRollBackups value="200" />
        <!--Gets or sets the maximum size that the output file is allowed to reach 
      before being rolled over to backup files
      => When the file size is greater than 'maximumFileSize', it will create a new file -->
        <maximumFileSize value="100KB"/>
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date [%thread] %-6level - [%username] - %message %exception%newline"/>
        </layout>
    </appender>

    <!--SMTP log-->
    <appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
        <to value="" />
        <from value="" />
        <subject value="" />
        <smtpHost value="" />
        <bufferSize value="512" />
        <lossy value="true" />
        <evaluator type="log4net.Core.LevelEvaluator">
            <threshold value="WARN"/>
        </evaluator>
        <layout type="log4net.Layout.PatternLayout">
            conversionPattern value="%date [%thread] %-6level - [%stacktracedetail] - [%username]  - %message %exception%newline"/>
        </layout>
    </appender>

    <!--ADO log-->
    <appender name="ADONetAppender" type="log4net.Appender.ADONetAppender">
        <bufferSize value="1" />
        <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <connectionString value="INSERT_HERE" />
        <commandText value="INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message],[Exception],[ServiceId]) VALUES
       (@log_date, @thread, @log_level, @logger, @message, @exception, @ServiceId)" />
        <parameter>
            <parameterName value="@log_date" />
            <dbType value="DateTime" />
            <layout type="log4net.Layout.RawTimeStampLayout" />
        </parameter>
        <parameter>
            <parameterName value="@thread" />
            <dbType value="String" />
            <size value="32" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%t" />
            </layout>
        </parameter>
        <parameter>
            <parameterName value="@log_level" />
            <dbType value="String" />
            <size value="512" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%p" />
            </layout>
        </parameter>
        <parameter>
            <parameterName value="@logger" />
            <dbType value="String" />
            <size value="512" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%c" />
            </layout>
        </parameter>
        <parameter>
            <parameterName value="@message" />
            <dbType value="String" />
            <size value="4000" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%m" />
            </layout>
        </parameter>
        <parameter>
            <parameterName value="@exception" />
            <dbType value="String" />
            <size value="2000" />
            <layout type="log4net.Layout.ExceptionLayout" />
        </parameter>
        <parameter>
            <parameterName value="@ServiceId" />
            <dbType value="Int32" />
            <layout type="log4net.Layout.RawPropertyLayout">
                <key value="ServiceId" />
            </layout>
        </parameter>
    </appender>

    <!--Console log-->
    <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender">
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date [%thread] %-6level - [%stacktracedetail] - [%username] - %message %exception%newline" />
        </layout>
    </appender>
    
    <root>
        <!--ALL | DEBUG | INFO | WARN | ERROR | FATAL-->
        <level value="ALL" />
        <appender-ref ref="RollingLogFileAppender" />
    </root>

</log4net>
